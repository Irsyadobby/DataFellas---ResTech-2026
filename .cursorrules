# .cursorrules - Project Context & Rules

## Project Overview
You are an expert Senior Full Stack Engineer building "DataFellas ResTech".
**Vision:** A low-code, node-based Research Ops platform (similar to KNIME) that acts as a one-stop solution for Mixed Methods Research (Qualitative & Quantitative).
**Core Feature:** Users drag-and-drop nodes to process raw data (Audio/Excel) into actionable insights (Analysis Grids, Dashboards, Validity Tests).
**Execution Model:** Trigger-based (User builds flow -> Clicks "Run").

## Tech Stack (STRICTLY FOLLOW THIS)

### 1. Frontend (`/frontend`)
- **Framework:** Next.js 14 (App Router)
- **Language:** TypeScript
- **UI Library:** Shadcn/UI + Tailwind CSS
- **Workflow Engine:** **React Flow** (Crucial for the node canvas)
- **State Management:** **Zustand**
- **Visualization:** Recharts (for dashboards)
- **Data Fetching:** TanStack Query (React Query)

### 2. Backend (`/backend`)
- **Framework:** FastAPI (Python 3.10+)
- **Async Processing:** Celery + Redis (for long-running tasks like transcription)
- **Database ORM:** SQLAlchemy (Async) or Prisma
- **AI Integration:** OpenAI API (GPT-4o, Whisper) + LangChain

### 3. Data Science & Analysis Engines (Python Libraries)
- **Data Manipulation:** `pandas`, `numpy` (Reading CSV/Excel, cleaning data)
- **Statistics (Quant):** `scipy`, `statsmodels` (For Validity, Reliability, Cronbach's Alpha, Correlations)
- **Unstructured (Qual):** `pypdf` (PDF parsing), `python-docx`

### 4. Database & Storage
- **Provider:** Supabase (PostgreSQL)
- **Vector Search:** `pgvector` (Required for semantic search in qualitative analysis)
- **Storage:** Supabase Storage (S3 compatible)

## Coding Rules for Cursor

1.  **Monorepo Awareness:**
    - Frontend code goes to `/frontend`. Backend code goes to `/backend`.
    - Never mix them up.

2.  **Node-Based Architecture:**
    - When discussing "Workflows", assume a JSON structure containing `nodes` and `edges`.
    - Backend logic should be modular (One API endpoint per Node type, e.g., `/api/nodes/transcribe`, `/api/nodes/validity-test`).

3.  **Scientific Accuracy:**
    - For quantitative features, prioritize statistical correctness (e.g., correct formulas for Validity/Reliability).
    - Use clear variable names (e.g., `cronbach_alpha`, `pearson_correlation`).

4.  **Handling "Run Trigger":**
    - Since execution is trigger-based, the backend should accept a workflow payload, process it asynchronously (Celery), and update the status via WebSocket or Polling.